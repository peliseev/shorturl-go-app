# SHORTURL-GO-APP
Простой telegram-bot и web-server реализующие возможность сокращения ссылок.

# Цель
Проект был создан, преследуя две цели:
* Изучить язык Go на примере "Real World Appplication"
* Добавить проект в резюме

# Предисловие
Я начал изучать язык Go 15 мая 2022 года. 29 мая 2022 года выложил на GitHub первую рабочую версию проекта, которую написал за 1,5 дня. В README.md описана архитектура проекта и причины принятия того или иного архитектурного решения.

## TODO
* Покрыть проект тестами
* Реализовать CI/CD
  * Сборка проекта
  * Подготовить Dockerfile и docker-compose
  * Написать pipe на базе GitHub Actions
* Добавить функцию подсчета переходов по короткой ссылке

# Архитектура
![Архитектура](img/shorturl-go-app-arch.png)

Структура приложения навеяна таким стилем как "Layered Architecture". Приложение имеет два компонента, для взаимодействия с пользователем:
* telegram - пакет, инкапсулирующий логику подключения к Telegram API и взаимодействия с пользователем через телеграм-бота
* server - web-server, который обрабатывает HTTP запросы от пользователя и посылает 302 Redirect, если пользователь перешел по валидной короткой ссылке

Промежуточный компонент domain описывает бизнес сущность приложения - `ShortURL` и предоставляет два интерфейса для взаимодействия с этой сущностью:
* `CreateShortURL(context.Context, *ShortURL) (string, error)`
* `GetOriginUrl(context.Context, string) (*ShortURL, error)`

DAO компонент mongo инкапсулирует в себе логику взаимодействия с базой данных MongoDB и имплементирует методы доменного интерфейса

Выбирая между SQL и NoSQL решениями в качестве СУБД я руководствовался тем, что для решения задачи не нужна транзакционность, но было бы неплохо заложить фундамент для масштабирования решения. Таким образом выбор пал на NoSQL СУБД.
MongoDB предоставляет механизмы горизонтального масштабирования из коробки, что нельзя сказать о классических SQL решениях, таких как Postgres.

Если понадобиться масштабировать приложение на чтение (что более вероятно, учитывая паттерны доступа к данным) - будет достаточно развернуть несколько реплик БД с ReadOnly доступом.

Если потребуется масштабировать на запись - монго справиться и с этим, т.к. у этой СУБД есть механизмы шардирование из коробки.